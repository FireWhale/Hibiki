<% content_for :title do %><%= language_helper(@event, :name)  %><% end %>

<% content_for :header do %>
  <div class="text-center">
    <h2><%= language_helper(@event, :name)  %></h2>
    <h4><%= language_helper(@event, :abbreviation) %><% unless language_helper(@event,:name, priority: 1) == language_helper(@event,:name) || language_helper(@event,:name, priority: 1) == language_helper(@event, :abbreviation) %>
        <%= language_helper(@event,:name, priority: 1) %>
      <% end %>
    </h4>
  </div>
<% end %>

<p id="notice"><%= notice %></p>

<div id="content">
  <div id="sidebar">
    <div id="attributes">
      <div class="panel">
        <div class="panel-heading">Information</div>
        <div class="panel-body info-list">
          <%= attribute_display(@event, 'name', "Name") %>
          <%= attribute_display(@event, 'altname', 'Kanji')%>
          <%= attribute_display(@event, 'abbreviation', 'Abbreviation')%>
          <%= attribute_display(@event, 'shorthand', 'Shorthand')%>
          <%= reference_helper(@event) %>
          <%= "#{content_tag(:b, 'Dates: ')}#{date_helper(@event, 'start_date')}".html_safe unless @event.start_date.nil?%><%= " to #{date_helper(@event, 'end_date')}" unless @event.end_date.nil? || @event.end_date == @event.start_date%>
        </div>
      </div>
      
      <% if can? :edit, @event %>
        <div id="admin-actions">
          <div class="panel">
            <div class="panel-heading">Admin Actions</div>
            <div class="nav nav-pills nav-stacked">
              <li><%= link_to 'Edit', eval("edit_" + @event.class.to_s.downcase + "_path(@event)") %></li>
              <li><%= link_to 'Destroy', @event, method: :delete, data: { confirm: 'Are you sure?' } %></li>
            </div>
          </div>
        </div>
      <% end %>
    </div>
  </div>
  <div id="information">
    <% unless language_helper(@event,:info, highlight: false).blank? %>
      <div id="info" class="info">
        <h3>Information</h3>
        <%= simple_format(language_helper(@event,:info, highlight: false)) %>
      </div>
    <% end %>
    
    <div id="albums" class="info">
      <h3>Albums (<%= @event.albums.filter_by_user_settings(current_user).count %>) <%= "(#{@event.albums.count - @event.albums.filter_by_user_settings(current_user).count} Hidden)" unless @event.albums.filter_by_user_settings(current_user).count == @event.albums.count %> </h3>
      <% unless @event.albums.empty? %>
        <div id="albums-list">
          <%= render :partial =>  'layouts/primary_models/album_list', :locals => {:albums => @albums } %>
        </div>
      <% else %>
        <%= "This event has no albums" %>
      <% end %>
    </div>
  </div>
</div>